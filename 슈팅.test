<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ìš°ì£¼ ìŠˆíŒ… ê²Œì„</title>
<style>
  body { margin: 0; background: black; overflow: hidden; }
  canvas { display: block; margin: auto; background: black; }
</style>
</head>
<body>

<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let gameSpeed = 1;

// ğŸš€ í”Œë ˆì´ì–´
const player = {
  x: 180,
  y: 520,
  width: 40,
  height: 40,
  speed: 5,
  lives: 3
};

// ë¯¸ì‚¬ì¼ í¬ê¸°
const MISSILE_WIDTH = 8;
const MISSILE_HEIGHT = 18;

let bullets = [];
let asteroids = [];
let startTime = Date.now();
let score = 0;
let speedUp = false;

// í‚¤ ì…ë ¥
const keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// ğŸ”« ë¯¸ì‚¬ì¼ ë°œì‚¬
function shoot() {
  bullets.push({
    x: player.x + player.width / 2 - MISSILE_WIDTH / 2,
    y: player.y,
    speed: 8
  });
}

// â˜„ï¸ ìš´ì„ ìƒì„±
function createAsteroid() {
  asteroids.push({
    x: Math.random() * (canvas.width - 30),
    y: -40,
    size: 30,
    speed: (2 + Math.random() * 2) * gameSpeed
  });
}

// ğŸ”„ ê²Œì„ ë¦¬ì…‹
function resetGame() {
  player.lives = 3;
  player.x = 180;
  player.y = 520;
  bullets = [];
  asteroids = [];
  gameSpeed = 1;
  speedUp = false;
  startTime = Date.now();
}

// ğŸ”„ ì—…ë°ì´íŠ¸
function update() {
  // ì´ë™
  if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
  if (keys["ArrowRight"] && player.x < canvas.width - player.width)
    player.x += player.speed;
  if (keys["ArrowUp"] && player.y > 0) player.y -= player.speed;

  // ë°œì‚¬
  if (keys[" "] && bullets.length < 5) shoot();

  // ë¯¸ì‚¬ì¼ ì´ë™
  bullets.forEach(b => b.y -= b.speed);
  bullets = bullets.filter(b => b.y > 0);

  // ìš´ì„ ì´ë™
  asteroids.forEach(a => a.y += a.speed);
  asteroids = asteroids.filter(a => a.y < canvas.height);

  // ğŸ’¥ ë¯¸ì‚¬ì¼-ìš´ì„ ì¶©ëŒ
  bullets.forEach((b, bi) => {
    asteroids.forEach((a, ai) => {
      if (
        b.x < a.x + a.size &&
        b.x + MISSILE_WIDTH > a.x &&
        b.y < a.y + a.size &&
        b.y + MISSILE_HEIGHT > a.y
      ) {
        bullets.splice(bi, 1);
        asteroids.splice(ai, 1);
      }
    });
  });

  // ğŸ’¥ í”Œë ˆì´ì–´-ìš´ì„ ì¶©ëŒ
  asteroids.forEach((a, ai) => {
    if (
      player.x < a.x + a.size &&
      player.x + player.width > a.x &&
      player.y < a.y + a.size &&
      player.y + player.height > a.y
    ) {
      asteroids.splice(ai, 1);
      player.lives--;
      if (player.lives <= 0) resetGame();
    }
  });

  // â± ì ìˆ˜ = ìƒì¡´ ì‹œê°„
  score = Math.floor((Date.now() - startTime) / 1000);

  // âš¡ 10ì´ˆ í›„ ì†ë„ ì¦ê°€
  if (score >= 10 && !speedUp) {
    gameSpeed = 1.5;
    speedUp = true;
  }
}

// ğŸ¨ ê·¸ë¦¬ê¸°
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // ìš°ì£¼ì„ 
  ctx.fillStyle = "cyan";
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // ë¯¸ì‚¬ì¼
  ctx.fillStyle = "orange";
  bullets.forEach(b =>
    ctx.fillRect(b.x, b.y, MISSILE_WIDTH, MISSILE_HEIGHT)
  );

  // ìš´ì„
  ctx.fillStyle = "gray";
  asteroids.forEach(a => {
    ctx.beginPath();
    ctx.arc(a.x + 15, a.y + 15, 15, 0, Math.PI * 2);
    ctx.fill();
  });

  // UI
  ctx.fillStyle = "white";
  ctx.font = "18px Arial";
  ctx.fillText("â¤ï¸ Lives: " + player.lives, 10, 25);
  ctx.fillText("â± Score: " + score, 10, 50);
}

// ğŸ” ë£¨í”„
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

setInterval(createAsteroid, 800);
loop();
</script>

</body>
</html>
